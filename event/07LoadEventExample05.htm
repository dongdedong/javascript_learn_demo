<!DOCTYPE html>
<html>
<head>
    <title>Load Event Example</title>
    <script type="text/javascript" src="EventUtil.js"></script>
</head>
<body>
    <script type="text/javascript">

        /*在这个例子中，首先为window 指定了onload 事件处理程序。原因在于，我们是想向DOM中添
        加一个新元素，所以必须确定页面已经加载完毕——如果在页面加载前操作document.body 会导致错
        误。然后，创建了一个新的图像元素，并设置了其onload 事件处理程序。最后又将这个图像添加到页
        面中，还设置了它的src 属性。这里有一点需要格外注意：新图像元素不一定要从添加到文档后才开始
        下载，只要设置了src 属性就会开始下载。*/
        EventUtil.addHandler(window, "load", function(){
            var image = document.createElement("img");
            EventUtil.addHandler(image, "load", function(event){
                event = EventUtil.getEvent(event);
                alert(EventUtil.getTarget(event).src);
            });
            document.body.appendChild(image);
            image.src = "smile.gif";            
        });
    </script>
</body>
</html>
